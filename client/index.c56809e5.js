import{S as e,i as s,s as t,e as r,t as a,m as l,c as o,a as n,b as c,d as i,n as h,f as m,g as d,h as f,j as u,k as p,w as v,u as g,G as y,O as V,v as C}from"./client.2cdcb56c.js";function E(e){let s;return{c(){this.h()},l(e){this.h()},h(){s=new V(e[1],null)},m(e,t){s.m(e,t)},p(e,t){2&t&&s.p(e[1])},d(e){e&&s.d()}}}function k(e){let s,t,l,h,d;return{c(){s=r("div"),t=r("article"),l=r("div"),h=r("p"),d=a("Can't get the latest version of Skript. Please refresh the page."),this.h()},l(e){s=o(e,"DIV",{class:!0});var r=n(s);t=o(r,"ARTICLE",{class:!0});var a=n(t);l=o(a,"DIV",{class:!0});var m=n(l);h=o(m,"P",{});var f=n(h);d=c(f,"Can't get the latest version of Skript. Please refresh the page."),f.forEach(i),m.forEach(i),a.forEach(i),r.forEach(i),this.h()},h(){m(l,"class","message-body"),m(t,"class","message is-danger"),m(s,"class","small-section")},m(e,r){f(e,s,r),u(s,t),u(t,l),u(l,h),u(h,d)},p:v,d(e){e&&i(s)}}}function H(e){let s,t,g,y,V,C,H;function S(e,s){return"error"===e[0]?k:E}let b=S(e),w=b(e);return{c(){s=r("div"),t=r("div"),g=r("h1"),y=a("Latest version of Skript ("),V=a(e[0]),C=a(")"),H=l(),w.c(),this.h()},l(r){s=o(r,"DIV",{class:!0});var a=n(s);t=o(a,"DIV",{style:!0});var l=n(t);g=o(l,"H1",{class:!0,style:!0});var m=n(g);y=c(m,"Latest version of Skript ("),V=c(m,e[0]),C=c(m,")"),m.forEach(i),H=h(l),w.l(l),l.forEach(i),a.forEach(i),this.h()},h(){m(g,"class","title"),d(g,"color",e[2].secondaryColor),d(t,"color",e[2].secondaryColor),m(s,"class","section")},m(e,r){f(e,s,r),u(s,t),u(t,g),u(g,y),u(g,V),u(g,C),u(t,H),w.m(t,null)},p(e,[s]){1&s&&p(V,e[0]),4&s&&d(g,"color",e[2].secondaryColor),b===(b=S(e))&&w?w.p(e,s):(w.d(1),w=b(e),w&&(w.c(),w.m(t,null))),4&s&&d(t,"color",e[2].secondaryColor)},i:v,o:v,d(e){e&&i(s),w.d()}}}async function S(e,s){return this.fetch("https://github.com/SkriptLang/Skript/releases/latest/",{headers:{"Access-Control-Allow-Origin":"*"}}).then(e=>Promise.all([e.text(),e.url.split("/")])).then(([e,s])=>({latestVersion:s[s.length-1],releaseHtml:e})).catch(e=>({latestVersion:"error",releaseHtml:""}))}function b(e,s,t){let r;g(e,C,e=>t(2,r=e));let a,{latestVersion:l}=s,{releaseHtml:o}=s;return y(async()=>{if("error"===l)return document.location.reload(!0);t(3,o=(new DOMParser).parseFromString(o,"text/html")),t(1,a=o.getElementsByClassName("markdown-body")[0].innerHTML)}),e.$set=e=>{"latestVersion"in e&&t(0,l=e.latestVersion),"releaseHtml"in e&&t(3,o=e.releaseHtml)},[l,a,r,o]}export default class extends e{constructor(e){super(),s(this,e,b,H,t,{latestVersion:0,releaseHtml:3})}}export{S as preload};
